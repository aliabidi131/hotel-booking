import{a as nt,b as ot,c as it}from"./chunk-OFAE3NWO.js";import{b as K,d as Q}from"./chunk-OUOYKILN.js";import{a as et}from"./chunk-57XUBXQJ.js";import{a as H}from"./chunk-ZTJU2KEZ.js";import{d as T,h as F}from"./chunk-A7BXMC5C.js";import{a as U,b as j,c as z,d as G,e as Y,f as q,i as J}from"./chunk-Y2H4V2JF.js";import{a as W,b as X}from"./chunk-5ETFMH7B.js";import{a as Z,b as tt}from"./chunk-AJRPLBKD.js";import"./chunk-BNM7QH6X.js";import"./chunk-QOH27NTF.js";import"./chunk-EJJBCPAK.js";import{ca as N,da as $,fa as A,ga as R,ha as V}from"./chunk-JJWXYU2O.js";import{$b as g,Aa as C,Gb as o,Hb as e,Ib as b,Mb as h,Oc as w,Pb as v,Pc as E,Qc as I,Rb as m,Sc as D,Vc as L,_b as i,ac as y,bb as a,bc as u,g as k,gc as S,ic as O,kc as P,lc as B,ma as d,ob as f,ra as x,ub as p,wb as s,za as M}from"./chunk-GQVS24Z7.js";var at=n=>["/hotels",n];function rt(n,l){n&1&&(o(0,"div",5),b(1,"mat-spinner"),e())}function ct(n,l){n&1&&(o(0,"div",6)(1,"mat-icon"),i(2,"event_busy"),e(),o(3,"h2"),i(4,"No Bookings Yet"),e(),o(5,"p"),i(6,"You haven't made any bookings. Start exploring our hotels!"),e(),o(7,"a",7),i(8,"Browse Hotels"),e()())}function st(n,l){if(n&1&&(o(0,"div",17)(1,"mat-icon"),i(2,"payments"),e(),o(3,"span",18),i(4),e()()),n&2){let t=m().$implicit;a(4),y("$",t.totalPrice,"")}}function lt(n,l){if(n&1){let t=h();o(0,"button",19),v("click",function(){M(t);let c=m().$implicit,_=m(2);return C(_.cancelBooking(c))}),i(1,"Cancel"),e()}}function mt(n,l){if(n&1&&(o(0,"mat-card",10)(1,"mat-card-header")(2,"mat-card-title"),i(3),e(),o(4,"mat-card-subtitle")(5,"mat-chip",11),i(6),P(7,"titlecase"),e()()(),o(8,"mat-card-content")(9,"div",12)(10,"div",13)(11,"mat-icon"),i(12,"calendar_today"),e(),o(13,"span"),i(14),e()(),o(15,"div",13)(16,"mat-icon"),i(17,"people"),e(),o(18,"span"),i(19),e()(),o(20,"div",13)(21,"mat-icon"),i(22,"hotel"),e(),o(23,"span"),i(24),e()(),p(25,st,5,1,"div",14),e()(),o(26,"mat-card-actions")(27,"a",15),i(28,"View Hotel"),e(),p(29,lt,2,0,"button",16),e()()),n&2){let t=l.$implicit,r=m(2);a(3),g(t.hotelName),a(2),s("ngClass","status-"+t.status),a(),g(B(7,11,t.status)),a(8),u("",r.formatDate(t.checkIn)," - ",r.formatDate(t.checkOut),""),a(5),u("",t.guests," ",t.guests===1?"Guest":"Guests",""),a(5),g(t.roomType),a(),s("ngIf",t.totalPrice),a(2),s("routerLink",O(13,at,t.hotelId)),a(2),s("ngIf",t.status==="pending"||t.status==="confirmed")}}function dt(n,l){if(n&1&&(o(0,"div",8),p(1,mt,30,15,"mat-card",9),e()),n&2){let t=m();a(),s("ngForOf",t.bookings())}}var Tt=(()=>{class n{constructor(){this.bookingService=d(et),this.authService=d(H),this.snackBar=d(Z),this.dialog=d(nt),this.bookings=f([]),this.isLoading=f(!0)}ngOnInit(){let t=this.authService.currentUser();t?this.bookingService.getUserBookings(t.uid).subscribe({next:r=>{this.bookings.set(r),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}}):this.isLoading.set(!1)}formatDate(t){return t?(t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}cancelBooking(t){this.dialog.open(it,{data:{title:"Cancel Booking",message:`Are you sure you want to cancel your booking at ${t.hotelName}?`}}).afterClosed().subscribe(c=>k(this,null,function*(){if(c)try{yield this.bookingService.cancelBooking(t.id),this.snackBar.open("Booking cancelled successfully","Close",{duration:3e3})}catch{this.snackBar.open("Failed to cancel booking","Close",{duration:3e3})}}))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=x({type:n,selectors:[["app-my-bookings"]],standalone:!0,features:[S],decls:6,vars:3,consts:[[1,"my-bookings-container","container"],[1,"page-title"],["class","loading",4,"ngIf"],["class","no-bookings",4,"ngIf"],["class","bookings-list",4,"ngIf"],[1,"loading"],[1,"no-bookings"],["mat-raised-button","","color","primary","routerLink","/hotels"],[1,"bookings-list"],["class","booking-card",4,"ngFor","ngForOf"],[1,"booking-card"],[3,"ngClass"],[1,"booking-details"],[1,"detail-row"],["class","detail-row total",4,"ngIf"],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","warn",3,"click",4,"ngIf"],[1,"detail-row","total"],[1,"price"],["mat-button","","color","warn",3,"click"]],template:function(r,c){r&1&&(o(0,"div",0)(1,"h1",1),i(2,"My Bookings"),e(),p(3,rt,2,0,"div",2)(4,ct,9,0,"div",3)(5,dt,2,1,"div",4),e()),r&2&&(a(3),s("ngIf",c.isLoading()),a(),s("ngIf",!c.isLoading()&&c.bookings().length===0),a(),s("ngIf",!c.isLoading()&&c.bookings().length>0))},dependencies:[L,w,E,I,D,F,T,J,U,Y,z,q,G,j,A,$,N,V,R,Q,K,tt,X,W,ot],styles:[".my-bookings-container[_ngcontent-%COMP%]{padding-top:84px}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:60px}.no-bookings[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:8px}.no-bookings[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.no-bookings[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:16px 0 8px}.no-bookings[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:24px}.bookings-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.booking-card[_ngcontent-%COMP%]{transition:box-shadow .2s}.booking-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026}.booking-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px;margin-top:16px}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#666}.detail-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#3f51b5}.detail-row.total[_ngcontent-%COMP%]{font-weight:500}.detail-row[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:#4caf50;font-size:1.1rem}.status-pending[_ngcontent-%COMP%]{background-color:#fff3e0!important;color:#e65100!important}.status-confirmed[_ngcontent-%COMP%]{background-color:#e8f5e9!important;color:#2e7d32!important}.status-cancelled[_ngcontent-%COMP%]{background-color:#ffebee!important;color:#c62828!important}.status-completed[_ngcontent-%COMP%]{background-color:#e3f2fd!important;color:#1565c0!important}"]})}}return n})();export{Tt as MyBookingsComponent};
