import{a as Ve,b as Oe,c as Le,d as Ne,e as Re,f as Be,g as $e,h as qe,i as Ge,j as je,k as Ue}from"./chunk-CCCI6TE4.js";import{a as B}from"./chunk-TDRMZAIR.js";import{a as be,b as we}from"./chunk-T2VQE4JV.js";import{a as ke,b as De,c as Pe}from"./chunk-OFAE3NWO.js";import{a as Te,b as Fe,d as $}from"./chunk-OUOYKILN.js";import{d as Z,h as ee}from"./chunk-A7BXMC5C.js";import{b as Ee,c as He}from"./chunk-J2QSAILY.js";import{a as ne,b as oe,c as re,f as ae,i as le}from"./chunk-Y2H4V2JF.js";import{a as Ae,b as Ie}from"./chunk-5ETFMH7B.js";import{a as q,b as G}from"./chunk-AJRPLBKD.js";import{b as me,d as C,f as de,g as se,j as ce,k as pe,l as ue,m as fe,n as he,o as _e,p as Ce,r as ge,s as xe,t as Se,u as ye,y as Me,z as ve}from"./chunk-BNM7QH6X.js";import{Z as te,ca as ie,ea as O,fa as L,ga as N,ha as R}from"./chunk-JJWXYU2O.js";import{$b as I,Aa as u,Bb as g,Cb as A,Db as j,Eb as M,Fb as v,Gb as n,Hb as i,Ia as T,Ib as c,Jb as b,Kb as w,Mb as S,Pb as h,Rb as _,Vc as V,Zb as K,_a as J,_b as o,a as z,ac as E,b as W,bb as l,bc as Q,g as k,gc as P,hc as X,ic as Y,ma as x,ob as F,ra as D,ub as s,wb as f,za as p}from"./chunk-GQVS24Z7.js";var Qe=()=>[1,2,3,4,5];function Xe(e,a){e&1&&(n(0,"mat-error"),o(1,"Hotel name is required"),i())}function Ye(e,a){if(e&1&&(n(0,"mat-option",9),o(1),i()),e&2){let t=a.$implicit;f("value",t),l(),Q("",t," ",t===1?"Star":"Stars","")}}function Ze(e,a){e&1&&(n(0,"mat-error"),o(1,"Price is required"),i())}function et(e,a){e&1&&(n(0,"mat-error"),o(1,"Price must be positive"),i())}function tt(e,a){e&1&&(n(0,"mat-error"),o(1,"Description is required"),i())}function it(e,a){if(e&1){let t=S();n(0,"div",16)(1,"mat-form-field",4)(2,"mat-label"),o(3),i(),c(4,"input",30),i(),n(5,"button",31),h("click",function(){let r=p(t).$index,d=_();return u(d.removeImage(r))}),n(6,"mat-icon"),o(7,"delete"),i()()()}if(e&2){let t=a.$index;l(3),E("Image URL ",t+1,""),l(),f("formControlName",t)}}function nt(e,a){if(e&1){let t=S();n(0,"mat-chip",32),h("removed",function(){let r=p(t).$index,d=_();return u(d.removeAmenity(r))}),o(1),n(2,"mat-icon",33),o(3,"cancel"),i()()}if(e&2){let t=a.$implicit;l(),E(" ",t," ")}}function ot(e,a){if(e&1){let t=S();n(0,"div",25)(1,"mat-form-field",7)(2,"mat-label"),o(3,"Room Name"),i(),c(4,"input",34),i(),n(5,"mat-form-field",7)(6,"mat-label"),o(7,"Price"),i(),c(8,"input",35),n(9,"span",11),o(10,"$\xA0"),i()(),n(11,"mat-form-field",7)(12,"mat-label"),o(13,"Capacity"),i(),c(14,"input",36),i(),n(15,"button",31),h("click",function(){let r=p(t).$index,d=_();return u(d.removeRoomType(r))}),n(16,"mat-icon"),o(17,"delete"),i()()()}if(e&2){let t=a.$index;f("formGroupName",t)}}function rt(e,a){e&1&&c(0,"mat-spinner",29)}function at(e,a){if(e&1&&o(0),e&2){let t=_();E(" ",t.hotel?"Update Hotel":"Add Hotel"," ")}}var ze=(()=>{class e{constructor(){this.hotelSaved=new T,this.cancelled=new T,this.fb=x(Ce),this.hotelService=x(B),this.snackBar=x(q),this.isSubmitting=F(!1),this.amenities=F([]),this.hotelForm=this.fb.group({name:["",C.required],stars:[3,C.required],price:[100,[C.required,C.min(1)]],location:[""],description:["",C.required],images:this.fb.array([]),roomTypes:this.fb.array([])})}get imagesArray(){return this.hotelForm.get("images")}get roomTypesArray(){return this.hotelForm.get("roomTypes")}ngOnInit(){this.hotel?(this.hotelForm.patchValue({name:this.hotel.name,stars:this.hotel.stars,price:this.hotel.price,location:this.hotel.location||"",description:this.hotel.description}),this.hotel.images?.forEach(t=>this.addImage(t)),this.hotel.roomTypes?.forEach(t=>this.addRoomType(t)),this.amenities.set(this.hotel.amenities||[])):this.addImage()}addImage(t=""){this.imagesArray.push(this.fb.control(t))}removeImage(t){this.imagesArray.removeAt(t)}addAmenity(t){t.trim()&&!this.amenities().includes(t.trim())&&this.amenities.set([...this.amenities(),t.trim()])}removeAmenity(t){let m=this.amenities();m.splice(t,1),this.amenities.set([...m])}addRoomType(t){this.roomTypesArray.push(this.fb.group({name:[t?.name||"",C.required],price:[t?.price||100,[C.required,C.min(1)]],capacity:[t?.capacity||2,[C.required,C.min(1)]]}))}removeRoomType(t){this.roomTypesArray.removeAt(t)}onSubmit(){return k(this,null,function*(){if(!this.hotelForm.valid)return;this.isSubmitting.set(!0);let t=W(z({},this.hotelForm.value),{images:this.imagesArray.value.filter(m=>m.trim()),amenities:this.amenities(),roomTypes:this.roomTypesArray.value});try{this.hotel?(yield this.hotelService.updateHotel(this.hotel.id,t),this.snackBar.open("Hotel updated successfully!","Close",{duration:3e3})):(yield this.hotelService.addHotel(t),this.snackBar.open("Hotel added successfully!","Close",{duration:3e3})),this.hotelSaved.emit()}catch(m){this.snackBar.open(m.message||"Failed to save hotel","Close",{duration:3e3})}finally{this.isSubmitting.set(!1)}})}static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275cmp=D({type:e,selectors:[["app-hotel-form"]],inputs:{hotel:"hotel"},outputs:{hotelSaved:"hotelSaved",cancelled:"cancelled"},standalone:!0,features:[P],decls:77,vars:9,consts:[["amenityInput",""],[1,"hotel-form-card"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Enter hotel name"],[1,"form-row","two-cols"],["appearance","outline"],["formControlName","stars"],[3,"value"],["matInput","","type","number","formControlName","price","placeholder","100"],["matTextPrefix",""],["matInput","","formControlName","location","placeholder","City, Country"],["matInput","","formControlName","description","rows","4","placeholder","Describe the hotel..."],[1,"images-section"],["formArrayName","images",1,"images-list"],[1,"image-input"],["mat-stroked-button","","type","button",3,"click"],[1,"amenities-section"],[1,"amenities-input"],["matInput","","placeholder","e.g., Free WiFi, Pool, Spa"],["mat-icon-button","","color","primary","type","button",3,"click"],[1,"amenities-chips"],[1,"room-types-section"],["formArrayName","roomTypes"],[1,"room-type-row",3,"formGroupName"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20"],["matInput","","placeholder","https://...",3,"formControlName"],["mat-icon-button","","color","warn","type","button",3,"click"],[3,"removed"],["matChipRemove",""],["matInput","","formControlName","name","placeholder","Standard"],["matInput","","type","number","formControlName","price"],["matInput","","type","number","formControlName","capacity"]],template:function(m,r){if(m&1){let d=S();n(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),o(3),i()(),n(4,"mat-card-content")(5,"form",2),h("ngSubmit",function(){return p(d),u(r.onSubmit())}),n(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),o(9,"Hotel Name"),i(),c(10,"input",5),s(11,Xe,2,0,"mat-error"),i()(),n(12,"div",6)(13,"mat-form-field",7)(14,"mat-label"),o(15,"Star Rating"),i(),n(16,"mat-select",8),M(17,Ye,2,3,"mat-option",9,j),i()(),n(19,"mat-form-field",7)(20,"mat-label"),o(21,"Price per Night"),i(),c(22,"input",10),n(23,"span",11),o(24,"$\xA0"),i(),s(25,Ze,2,0,"mat-error")(26,et,2,0,"mat-error"),i()(),n(27,"mat-form-field",4)(28,"mat-label"),o(29,"Location"),i(),c(30,"input",12),i(),n(31,"mat-form-field",4)(32,"mat-label"),o(33,"Description"),i(),c(34,"textarea",13),s(35,tt,2,0,"mat-error"),i(),n(36,"div",14)(37,"h4"),o(38,"Images"),i(),n(39,"div",15),M(40,it,8,2,"div",16,A),i(),n(42,"button",17),h("click",function(){return p(d),u(r.addImage())}),n(43,"mat-icon"),o(44,"add_photo_alternate"),i(),o(45," Add Image "),i()(),n(46,"div",18)(47,"h4"),o(48,"Amenities"),i(),n(49,"div",19)(50,"mat-form-field",4)(51,"mat-label"),o(52,"Add Amenity"),i(),c(53,"input",20,0),i(),n(55,"button",21),h("click",function(){p(d);let H=K(54);return r.addAmenity(H.value),u(H.value="")}),n(56,"mat-icon"),o(57,"add"),i()()(),n(58,"div",22),M(59,nt,4,1,"mat-chip",null,j),i()(),n(61,"div",23)(62,"h4"),o(63,"Room Types"),i(),n(64,"div",24),M(65,ot,18,1,"div",25,A),i(),n(67,"button",17),h("click",function(){return p(d),u(r.addRoomType())}),n(68,"mat-icon"),o(69,"add"),i(),o(70," Add Room Type "),i()(),n(71,"div",26)(72,"button",27),h("click",function(){return p(d),u(r.cancelled.emit())}),o(73,"Cancel"),i(),n(74,"button",28),s(75,rt,1,0,"mat-spinner",29)(76,at,1,1),i()()()()()}if(m&2){let d,y,H,U;l(3),I(r.hotel?"Edit Hotel":"Add New Hotel"),l(2),f("formGroup",r.hotelForm),l(6),g(11,(d=r.hotelForm.get("name"))!=null&&d.hasError("required")?11:-1),l(6),v(X(8,Qe)),l(8),g(25,(y=r.hotelForm.get("price"))!=null&&y.hasError("required")?25:-1),l(),g(26,(H=r.hotelForm.get("price"))!=null&&H.hasError("min")?26:-1),l(9),g(35,(U=r.hotelForm.get("description"))!=null&&U.hasError("required")?35:-1),l(5),v(r.imagesArray.controls),l(19),v(r.amenities()),l(6),v(r.roomTypesArray.controls),l(9),f("disabled",!r.hotelForm.valid||r.isSubmitting()),l(),g(75,r.isSubmitting()?75:76)}},dependencies:[V,ge,ce,me,pe,de,se,ue,_e,fe,he,le,ne,re,ae,oe,ve,Me,xe,Se,ye,He,Ee,we,be,te,L,ie,O,R,N,$,Fe,Te,G,Ie,Ae],styles:[".hotel-form-card[_ngcontent-%COMP%]{margin-bottom:24px}.form-row[_ngcontent-%COMP%]{margin-bottom:8px}.form-row.two-cols[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}h4[_ngcontent-%COMP%]{margin:16px 0 12px;color:#333}.images-list[_ngcontent-%COMP%]{margin-bottom:12px}.image-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.image-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.amenities-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.amenities-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.amenities-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}.room-type-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr auto;gap:16px;align-items:center;margin-bottom:8px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:24px;padding-top:16px;border-top:1px solid #eee}@media (max-width: 600px){.form-row.two-cols[_ngcontent-%COMP%], .room-type-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return e})();var lt=e=>["/hotels",e];function mt(e,a){if(e&1){let t=S();n(0,"app-hotel-form",14),h("hotelSaved",function(){p(t);let r=_();return u(r.onHotelUpdated())})("cancelled",function(){p(t);let r=_();return u(r.editingHotel.set(null))}),i()}if(e&2){let t=_();f("hotel",t.editingHotel())}}function dt(e,a){e&1&&(n(0,"th",15),o(1,"Image"),i())}function st(e,a){if(e&1&&(n(0,"td",16),c(1,"img",17),i()),e&2){let t=a.$implicit;l(),f("src",(t.images==null?null:t.images[0])||"assets/placeholder-hotel.jpg",J)("alt",t.name)}}function ct(e,a){e&1&&(n(0,"th",15),o(1,"Name"),i())}function pt(e,a){if(e&1&&(n(0,"td",16)(1,"a",18),o(2),i()()),e&2){let t=a.$implicit;l(),f("routerLink",Y(2,lt,t.id)),l(),I(t.name)}}function ut(e,a){e&1&&(n(0,"th",15),o(1,"Stars"),i())}function ft(e,a){e&1&&(n(0,"mat-icon"),o(1,"star"),i())}function ht(e,a){if(e&1&&(n(0,"td",16)(1,"div",19),M(2,ft,2,0,"mat-icon",null,A),i()()),e&2){let t=a.$implicit,m=_();l(2),v(m.getStarsArray(t.stars))}}function _t(e,a){e&1&&(n(0,"th",15),o(1,"Price"),i())}function Ct(e,a){if(e&1&&(n(0,"td",16)(1,"span",20),o(2),i()()),e&2){let t=a.$implicit;l(2),E("$",t.price,"")}}function gt(e,a){e&1&&(n(0,"th",15),o(1,"Location"),i())}function xt(e,a){if(e&1&&(n(0,"td",16),o(1),i()),e&2){let t=a.$implicit;l(),I(t.location||"-")}}function St(e,a){e&1&&(n(0,"th",15),o(1,"Actions"),i())}function yt(e,a){if(e&1){let t=S();n(0,"td",16)(1,"button",21),h("click",function(){let r=p(t).$implicit,d=_();return u(d.editHotel(r))}),n(2,"mat-icon"),o(3,"edit"),i()(),n(4,"button",22),h("click",function(){let r=p(t).$implicit,d=_();return u(d.deleteHotel(r))}),n(5,"mat-icon"),o(6,"delete"),i()()()}}function Mt(e,a){e&1&&c(0,"tr",23)}function vt(e,a){e&1&&c(0,"tr",24)}function bt(e,a){e&1&&(n(0,"div",13)(1,"mat-icon"),o(2,"hotel"),i(),n(3,"p"),o(4,"No hotels found. Add your first hotel!"),i()())}var fi=(()=>{class e{constructor(){this.hotels=[],this.hotelDeleted=new T,this.hotelService=x(B),this.dialog=x(ke),this.snackBar=x(q),this.editingHotel=F(null),this.displayedColumns=["image","name","stars","price","location","actions"]}getStarsArray(t){return Array(t).fill(0)}editHotel(t){this.editingHotel.set(t)}onHotelUpdated(){this.editingHotel.set(null),this.hotelDeleted.emit()}deleteHotel(t){this.dialog.open(Pe,{data:{title:"Delete Hotel",message:`Are you sure you want to delete "${t.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel"}}).afterClosed().subscribe(r=>k(this,null,function*(){if(r)try{yield this.hotelService.deleteHotel(t.id),this.snackBar.open("Hotel deleted successfully","Close",{duration:3e3}),this.hotelDeleted.emit()}catch{this.snackBar.open("Failed to delete hotel","Close",{duration:3e3})}}))}static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275cmp=D({type:e,selectors:[["app-hotel-list-admin"]],inputs:{hotels:"hotels"},outputs:{hotelDeleted:"hotelDeleted"},standalone:!0,features:[P],decls:24,vars:5,consts:[[3,"hotel"],[1,"table-container"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","stars"],["matColumnDef","price"],["matColumnDef","location"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"no-data"],[3,"hotelSaved","cancelled","hotel"],["mat-header-cell",""],["mat-cell",""],[1,"hotel-thumb",3,"src","alt"],[1,"hotel-name",3,"routerLink"],[1,"star-rating"],[1,"price"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(m,r){m&1&&(s(0,mt,1,1,"app-hotel-form",0),n(1,"div",1)(2,"table",2),b(3,3),s(4,dt,2,0,"th",4)(5,st,2,2,"td",5),w(),b(6,6),s(7,ct,2,0,"th",4)(8,pt,3,4,"td",5),w(),b(9,7),s(10,ut,2,0,"th",4)(11,ht,4,0,"td",5),w(),b(12,8),s(13,_t,2,0,"th",4)(14,Ct,3,1,"td",5),w(),b(15,9),s(16,gt,2,0,"th",4)(17,xt,2,1,"td",5),w(),b(18,10),s(19,St,2,0,"th",4)(20,yt,7,0,"td",5),w(),s(21,Mt,1,0,"tr",11)(22,vt,1,0,"tr",12),i()(),s(23,bt,5,0,"div",13)),m&2&&(g(0,r.editingHotel()?0:-1),l(2),f("dataSource",r.hotels),l(19),f("matHeaderRowDef",r.displayedColumns),l(),f("matRowDefColumns",r.displayedColumns),l(),g(23,r.hotels.length===0?23:-1))},dependencies:[V,ee,Z,Ue,Ve,Le,$e,Ne,Oe,qe,Re,Be,Ge,je,L,O,R,N,$,De,G,ze],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:auto;background:#fff;border-radius:8px}table[_ngcontent-%COMP%]{width:100%}.hotel-thumb[_ngcontent-%COMP%]{width:80px;height:60px;object-fit:cover;border-radius:4px}.hotel-name[_ngcontent-%COMP%]{color:#3f51b5;text-decoration:none;font-weight:500}.hotel-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.star-rating[_ngcontent-%COMP%]{display:flex;color:#ffc107}.star-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.price[_ngcontent-%COMP%]{color:#4caf50;font-weight:500}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#ccc;margin-bottom:16px}"]})}}return e})();export{ze as a,fi as b};
